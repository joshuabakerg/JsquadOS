local tArgs = { ... }

receiverID = ""
sendContents = ""
receiveName = ""
fileName = ""

if #tArgs < 3 then
	if tArgs[1] ~= "receive" then
		return
	end
end


function Send()
	print("In send function")
	local sIDs , sMssge , sDst = ""
	local myFileS = fs.open(shell.resolve(fileName),"r")
	sendContents = myFileS.readAll()
	myFileS.close()
	while true do 
		rednet.send(tonumber(receiverID),sendContents)
		print("send attempted")
		sIDs,sMssge,sDst =  rednet.receive(4)
		if sIDs == tonumber(receiverID) and sMssge == "Successful" then
			print("Successful")
			sleep(1)
			break
		end
		
	end
end

function Receive()
	local myFileR = fs.open(shell.dir().."/"..receiveName,"w")
	local sID ,sMssge, sDst = rednet.receive()
	myFileR.write(sMssge)
	myFileR.close()
	sleep(2)
	rednet.send(tonumber(sID),"Successful")
end

if tArgs[1] == "send" then
	receiverID = tArgs[2]
	fileName = tArgs[3]
	Send()
elseif tArgs[1] == "receive" then
	receiveName = tArgs[2]
	Receive()
end
